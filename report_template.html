<!DOCTYPE html>
<html>
<head>
	<title>Chart.js Scatter Plot Example</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.27.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@0.1.1"></script>

</head>
<body>
	<div style="width: 90%;">
		<canvas id="myChart"></canvas>
	</div>

	<script id="script" y-labels="" report-data="">

        const reportDataStr = document.currentScript.getAttribute('report-data');
        const yLabelsStr = document.currentScript.getAttribute('y-labels');

        const reportData = JSON.parse(reportDataStr);
        const yLabels = JSON.parse(yLabelsStr);

		const data = {
            datasets: [{
                label: 'Scatter Dataset',
                data: reportData,
                backgroundColor: 'rgba(255, 99, 132, 0.5)'
            }]
        };

        const config = {
            type: 'scatter',
            data: data,
            options: {
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            parser: 'YYYY-MM-DD HH:mm:ss',
                            tooltipFormat: 'll HH:mm:ss',
                            unit: 'second',
                            displayFormats: {
                                second: 'HH:mm:ss'
                            }
                        }
                    },
                    y: {
                        type: 'category',
                        position: 'left',
                        labels: yLabels
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                const point = context.raw;
                                return `${point.event}`;
                            }
                        }
                    }
                },
                parsing: {
                    xAxisKey: 't',
                    yAxisKey: 'char'
                }
            }
        };

        var myChart = new Chart(
            document.getElementById('myChart'),
            config
        );
	</script>
</body>
</html>
